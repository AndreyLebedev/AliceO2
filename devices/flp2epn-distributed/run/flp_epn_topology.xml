<topology id="myTopology">
	
	<property id="testFLPSamplerOutputAddress" />
	<property id="commandInputAddress" />
	<property id="heartbeatInputAddress" />
	<property id="testEPNdistributedInputAddress" />
	
	<declrequirement id="testFLPSamplerHost">
    	<hostPattern value=".+.gsi.de"/>
	</declrequirement>
	
	<declrequirement id="testFLPdistributedHost">
    	<hostPattern value=".+.gsi.de"/>
	</declrequirement>
	
	<declrequirement id="testEPNdistributedHost">
    	<hostPattern value=".+.gsi.de"/>
	</declrequirement>
	
  	<decltask id="testFLPSampler">
		<exe reachable="false">/Users/andrey/Development/gsi/aliceo2/build_dds/bin/testFLPSampler --id 101 --event-rate 100 --output-socket-type pub --output-buff-size 10 --output-method bind</exe>
		<requirement>testFLPSamplerHost</requirement>
		<properties>
			<id>testFLPSamplerOutputAddress</id>
		</properties>
	</decltask>
	
  	<decltask id="testFLPdistributed">
		<exe reachable="false">/Users/andrey/Development/gsi/aliceo2/build_dds/bin/testFLP_distributed --id FLP0 --event-size 10000000 --num-inputs 3 --num-outputs 5 --heartbeat-timeout 20000 --send-offset 0 --input-socket-type sub --input-buff-size 10 --input-method bind --log-input-rate 0 --input-socket-type sub --input-buff-size 10 --input-method bind --log-input-rate 0 --input-socket-type sub --input-buff-size 10 --input-method connect --log-input-rate 0 --output-socket-type pub --output-buff-size 10 --output-method connect --log-output-rate 1</exe>
		<requirement>testFLPdistributedHost</requirement>
		<properties>
			<id>testFLPSamplerOutputAddress</id>
			<id>commandInputAddress</id>
			<id>heartbeatInputAddress</id>
			<id>testEPNdistributedInputAddress</id>
		</properties>
	</decltask>
	
  	<decltask id="testEPNdistributed">
		<exe reachable="false">/Users/andrey/Development/gsi/aliceo2/build_dds/bin/testEPN_distributed --id EPN0 --num-outputs 3 --heartbeat-interval 5000 --input-socket-type sub --input-buff-size 10 --input-method bind --log-input-rate 1 --output-socket-type pub --output-buff-size 10 --output-method connect --log-output-rate 0</exe>
		<requirement>testEPNdistributedHost</requirement>
		<properties>
			<id>commandInputAddress</id>
			<id>heartbeatInputAddress</id>
			<id>testEPNdistributedInputAddress</id>
		</properties>
	</decltask>
	
	
	<main id="main">
	    <task>testFLPSampler</task>
		<group id="groupFLP" n="3">
			<task>testFLPdistributed</task>
		</group>
		<group id="groupEPN" n="5">
			<task>testEPNdistributed</task>
		</group>
	</main>
	
</topology>
